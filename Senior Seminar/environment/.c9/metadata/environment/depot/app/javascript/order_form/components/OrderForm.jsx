{"filter":false,"title":"OrderForm.jsx","tooltip":"/depot/app/javascript/order_form/components/OrderForm.jsx","ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":62,"column":0},"end":{"row":62,"column":0},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":35,"state":"no_regex","mode":"ace/mode/javascript"}},"hash":"ada6be2e64068fe7be7127f4ddf75a34b26a4927","undoManager":{"mark":20,"position":20,"stack":[[{"start":{"row":0,"column":0},"end":{"row":20,"column":1},"action":"insert","lines":["import React from \"react\";","import axios from \"axios\";","import { Link } from \"react-router-dom\";","","export default class OrderForm extends React.Component {","    render = () => {","","        return (","            <div className=\"container\">","                <h2>Please Enter Your Details</h2>","                <form>","                    <div className=\"actions\" align=\"right\">","                        <Link className=\"btn btn-success\" to={{pathname:\"/\"}}>","                            Cancel","                        </Link>","                    </div>","                </form>","            </div>","        );","    };","}"],"id":1}],[{"start":{"row":3,"column":0},"end":{"row":4,"column":0},"action":"insert","lines":["import Cart from '../../catalog/components/Cart';",""],"id":2}],[{"start":{"row":6,"column":4},"end":{"row":7,"column":0},"action":"insert","lines":["",""],"id":3},{"start":{"row":7,"column":0},"end":{"row":7,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":6,"column":4},"end":{"row":8,"column":6},"action":"insert","lines":["handlePopularity = (books) => {","        // This is simply an empty placeholder method since on the OrderForm page, there is no \"popularity\" to update.","    };"],"id":4}],[{"start":{"row":9,"column":20},"end":{"row":10,"column":0},"action":"remove","lines":["",""],"id":5}],[{"start":{"row":10,"column":16},"end":{"row":11,"column":0},"action":"insert","lines":["",""],"id":6},{"start":{"row":11,"column":0},"end":{"row":11,"column":12},"action":"insert","lines":["            "]}],[{"start":{"row":11,"column":12},"end":{"row":16,"column":22},"action":"insert","lines":["<div className=\"container\">","                <div className=\"row\">","                    <div className=\"col-md-12 pull-right\">","                        <Cart ref=\"cart\" id={this.props.cart_id} handlePopularity={this.handlePopularity} url={this.props.match.url}/>","                    </div>","                </div>"],"id":7}],[{"start":{"row":17,"column":0},"end":{"row":18,"column":0},"action":"remove","lines":["            <div className=\"container\">",""],"id":8}],[{"start":{"row":8,"column":6},"end":{"row":9,"column":0},"action":"insert","lines":["",""],"id":9},{"start":{"row":9,"column":0},"end":{"row":9,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":0,"column":0},"end":{"row":29,"column":1},"action":"remove","lines":["import React from \"react\";","import axios from \"axios\";","import { Link } from \"react-router-dom\";","import Cart from '../../catalog/components/Cart';","","export default class OrderForm extends React.Component {","    handlePopularity = (books) => {","        // This is simply an empty placeholder method since on the OrderForm page, there is no \"popularity\" to update.","    };","    ","    render = () => {","        return (","            <div className=\"container\">","                <div className=\"row\">","                    <div className=\"col-md-12 pull-right\">","                        <Cart ref=\"cart\" id={this.props.cart_id} handlePopularity={this.handlePopularity} url={this.props.match.url}/>","                    </div>","                </div>","                <h2>Please Enter Your Details</h2>","                <form>","                    <div className=\"actions\" align=\"right\">","                        <Link className=\"btn btn-success\" to={{pathname:\"/\"}}>","                            Cancel","                        </Link>","                    </div>","                </form>","            </div>","        );","    };","}"],"id":10},{"start":{"row":0,"column":0},"end":{"row":169,"column":1},"action":"insert","lines":["import React from \"react\";","import axios from \"axios\";","import { Link } from \"react-router-dom\";","","import Cart from '../../catalog/components/Cart';","import PayTypeSelector from './PayTypeSelector';","import classnames from \"classnames\";","","export default class OrderForm extends React.Component {","","    constructor(props) {","        super(props);","        this.state = {","            name: \"\",","            address: \"\",","            email: \"\",","            pay_type: \"\",","            errors: {}","        };","        this.onInputChange = this.onInputChange.bind(this);","        this.onFormSubmit = this.onFormSubmit.bind(this);","    }","","    onFormSubmit(event) {","        event.preventDefault();","","        const newOrder = {","            name: this.state.name,","            address: this.state.address,","            email: this.state.email,","            pay_type: this.state.pay_type","        };","","        var self = this;","        axios.defaults.headers.common[\"X-Requested-With\"] = \"XMLHttpRequest\";","        axios","            .post(\"/orders\", { ...newOrder })","            .then(function(response) {","                console.log(response.data);","                self.props.history.push({","                  pathname: '/'","                });","            })","            .catch(function(error) {","                console.log(error.response);","                // alert(\"Cannot place order: \", error);","                self.setState({errors: error.response.data})","            });","    }","","    onInputChange(e) {","        this.setState({ [e.target.name]: e.target.value });","    }","","    handlePopularity = (books) => {","","    };","","    handleSelectPayType = selected_pay_type => {","        // console.log(selected_pay_type);","        this.setState( {pay_type: selected_pay_type});","    }","","    render = () => {","        const { errors } = this.state;","        console.log(errors)","","        return (","            <div className=\"container\">","                <div className=\"row\">","                    <div className=\"col-md-12 pull-right\">","                        <Cart ref=\"cart\" id={this.props.cart_id} handlePopularity={this.handlePopularity} url={this.props.match.url}/>","                    </div>","                </div>","","                <h2>Please Enter Your Details</h2>","                <form noValidate onSubmit={this.onFormSubmit}>","                    <div>","                        {errors.form && (","                            <div className=\"invalid-feedback\" style={{display: \"block\"}}>","                                {errors.form}","                            </div>","                        )}","                    </div>","","                    <div className=\"form-group\">","                        <input","                            type=\"text\"","                            className={classnames(","                                \"form-control form-control-lg\",","                                { \"is-invalid\": errors.name }","                            )}","                               placeholder=\"Name\"","                            name=\"name\"","                            value={this.state.name}","                            onChange={this.onInputChange}","                        />","                        {errors.name && (","                            <div className=\"invalid-feedback\">","                                {errors.name}","                            </div>","                        )}","                    </div>","                    <div className=\"form-group\">","                        <input","                            type=\"address\"","                            className={classnames(","                                \"form-control form-control-lg\",","                                { \"is-invalid\": errors.address }","                            )}","                            placeholder=\"Address\"","                            name=\"address\"","                            value={this.state.address}","                            onChange={this.onInputChange}","                        />","                        {errors.address && (","                            <div className=\"invalid-feedback\">","                                {errors.address}","                            </div>","                        )}","                    </div>","                    <div className=\"form-group\">","                        <input","                            type=\"email\"","                            className={classnames(","                                \"form-control form-control-lg\",","                                {","                                    \"is-invalid\":","                                        errors.email","                                }","                            )}","                            placeholder=\"Email\"","                            name=\"email\"","                            value={this.state.email}","                            onChange={this.onInputChange}","                        />","                        {errors.email && (","                            <div className=\"invalid-feedback\">","                                {errors.email.join(\", \")}","                            </div>","                        )}","                    </div>","","                    <div className=\"form-group\">","                    <div>","                        <PayTypeSelector handleSelectPayType={this.handleSelectPayType} />","                    </div>","                        {errors.pay_type && (","                            <div className=\"invalid-feedback\" style={{display: \"block\"}}>","                                {errors.pay_type.join(\", \")}","                            </div>","                        )}","                    </div>","","","                    <div className=\"actions\" align=\"right\">","                        <input","                            type=\"submit\"","                            className=\"btn btn-success\"","                        />","                        &nbsp;","                        <Link className=\"btn btn-success\" to={{pathname:\"/\"}}>","                            Cancel","                        </Link>","                    </div>","                </form>","            </div>","        );","    };","}"]}],[{"start":{"row":65,"column":27},"end":{"row":66,"column":0},"action":"insert","lines":["",""],"id":11},{"start":{"row":66,"column":0},"end":{"row":66,"column":8},"action":"insert","lines":["        "]}],[{"start":{"row":66,"column":8},"end":{"row":66,"column":48},"action":"insert","lines":["var {true_cart_id} = this.props.location"],"id":12}],[{"start":{"row":72,"column":0},"end":{"row":73,"column":0},"action":"remove","lines":["                        <Cart ref=\"cart\" id={this.props.cart_id} handlePopularity={this.handlePopularity} url={this.props.match.url}/>",""],"id":13}],[{"start":{"row":72,"column":20},"end":{"row":73,"column":0},"action":"insert","lines":["",""],"id":14},{"start":{"row":73,"column":0},"end":{"row":73,"column":20},"action":"insert","lines":["                    "]}],[{"start":{"row":72,"column":20},"end":{"row":72,"column":24},"action":"insert","lines":["    "],"id":15}],[{"start":{"row":72,"column":24},"end":{"row":72,"column":164},"action":"insert","lines":["<Cart ref=\"cart\" id={true_cart_id ? true_cart_id : this.props.cart_id} handlePopularity={this.handlePopularity} url={this.props.match.url}/>"],"id":16}],[{"start":{"row":162,"column":24},"end":{"row":164,"column":31},"action":"remove","lines":["<Link className=\"btn btn-success\" to={{pathname:\"/\"}}>","                            Cancel","                        </Link>"],"id":17}],[{"start":{"row":162,"column":24},"end":{"row":164,"column":39},"action":"insert","lines":["<Link className=\"btn btn-success\" to={{pathname:\"/\", true_cart_id: true_cart_id }}>","                                    Cancel","                                </Link>"],"id":18}],[{"start":{"row":164,"column":28},"end":{"row":164,"column":32},"action":"remove","lines":["    "],"id":19},{"start":{"row":164,"column":24},"end":{"row":164,"column":28},"action":"remove","lines":["    "]}],[{"start":{"row":163,"column":34},"end":{"row":163,"column":35},"action":"remove","lines":[" "],"id":20},{"start":{"row":163,"column":33},"end":{"row":163,"column":34},"action":"remove","lines":[" "]},{"start":{"row":163,"column":32},"end":{"row":163,"column":33},"action":"remove","lines":[" "]},{"start":{"row":163,"column":28},"end":{"row":163,"column":32},"action":"remove","lines":["    "]},{"start":{"row":163,"column":24},"end":{"row":163,"column":28},"action":"remove","lines":["    "]}],[{"start":{"row":163,"column":24},"end":{"row":163,"column":28},"action":"insert","lines":["    "],"id":21}]]},"timestamp":1552528045620}