<!DOCTYPE html>
<html>

<head>

<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<title>lab5</title>


<style type="text/css">
body {
  font-family: Helvetica, arial, sans-serif;
  font-size: 14px;
  line-height: 1.6;
  padding-top: 10px;
  padding-bottom: 10px;
  background-color: white;
  padding: 30px; }

body > *:first-child {
  margin-top: 0 !important; }
body > *:last-child {
  margin-bottom: 0 !important; }

a {
  color: #4183C4; }
a.absent {
  color: #cc0000; }
a.anchor {
  display: block;
  padding-left: 30px;
  margin-left: -30px;
  cursor: pointer;
  position: absolute;
  top: 0;
  left: 0;
  bottom: 0; }

h1, h2, h3, h4, h5, h6 {
  margin: 20px 0 10px;
  padding: 0;
  font-weight: bold;
  -webkit-font-smoothing: antialiased;
  cursor: text;
  position: relative; }

h1:hover a.anchor, h2:hover a.anchor, h3:hover a.anchor, h4:hover a.anchor, h5:hover a.anchor, h6:hover a.anchor {
  background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA09pVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoMTMuMCAyMDEyMDMwNS5tLjQxNSAyMDEyLzAzLzA1OjIxOjAwOjAwKSAgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OUM2NjlDQjI4ODBGMTFFMTg1ODlEODNERDJBRjUwQTQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OUM2NjlDQjM4ODBGMTFFMTg1ODlEODNERDJBRjUwQTQiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo5QzY2OUNCMDg4MEYxMUUxODU4OUQ4M0REMkFGNTBBNCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo5QzY2OUNCMTg4MEYxMUUxODU4OUQ4M0REMkFGNTBBNCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PsQhXeAAAABfSURBVHjaYvz//z8DJYCRUgMYQAbAMBQIAvEqkBQWXI6sHqwHiwG70TTBxGaiWwjCTGgOUgJiF1J8wMRAIUA34B4Q76HUBelAfJYSA0CuMIEaRP8wGIkGMA54bgQIMACAmkXJi0hKJQAAAABJRU5ErkJggg==) no-repeat 10px center;
  text-decoration: none; }

h1 tt, h1 code {
  font-size: inherit; }

h2 tt, h2 code {
  font-size: inherit; }

h3 tt, h3 code {
  font-size: inherit; }

h4 tt, h4 code {
  font-size: inherit; }

h5 tt, h5 code {
  font-size: inherit; }

h6 tt, h6 code {
  font-size: inherit; }

h1 {
  font-size: 28px;
  color: black; }

h2 {
  font-size: 24px;
  border-bottom: 1px solid #cccccc;
  color: black; }

h3 {
  font-size: 18px; }

h4 {
  font-size: 16px; }

h5 {
  font-size: 14px; }

h6 {
  color: #777777;
  font-size: 14px; }

p, blockquote, ul, ol, dl, li, table, pre {
  margin: 15px 0; }

hr {
  background: transparent url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAECAYAAACtBE5DAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OENDRjNBN0E2NTZBMTFFMEI3QjRBODM4NzJDMjlGNDgiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OENDRjNBN0I2NTZBMTFFMEI3QjRBODM4NzJDMjlGNDgiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4Q0NGM0E3ODY1NkExMUUwQjdCNEE4Mzg3MkMyOUY0OCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo4Q0NGM0E3OTY1NkExMUUwQjdCNEE4Mzg3MkMyOUY0OCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PqqezsUAAAAfSURBVHjaYmRABcYwBiM2QSA4y4hNEKYDQxAEAAIMAHNGAzhkPOlYAAAAAElFTkSuQmCC) repeat-x 0 0;
  border: 0 none;
  color: #cccccc;
  height: 4px;
  padding: 0;
}

body > h2:first-child {
  margin-top: 0;
  padding-top: 0; }
body > h1:first-child {
  margin-top: 0;
  padding-top: 0; }
  body > h1:first-child + h2 {
    margin-top: 0;
    padding-top: 0; }
body > h3:first-child, body > h4:first-child, body > h5:first-child, body > h6:first-child {
  margin-top: 0;
  padding-top: 0; }

a:first-child h1, a:first-child h2, a:first-child h3, a:first-child h4, a:first-child h5, a:first-child h6 {
  margin-top: 0;
  padding-top: 0; }

h1 p, h2 p, h3 p, h4 p, h5 p, h6 p {
  margin-top: 0; }

li p.first {
  display: inline-block; }
li {
  margin: 0; }
ul, ol {
  padding-left: 30px; }

ul :first-child, ol :first-child {
  margin-top: 0; }

dl {
  padding: 0; }
  dl dt {
    font-size: 14px;
    font-weight: bold;
    font-style: italic;
    padding: 0;
    margin: 15px 0 5px; }
    dl dt:first-child {
      padding: 0; }
    dl dt > :first-child {
      margin-top: 0; }
    dl dt > :last-child {
      margin-bottom: 0; }
  dl dd {
    margin: 0 0 15px;
    padding: 0 15px; }
    dl dd > :first-child {
      margin-top: 0; }
    dl dd > :last-child {
      margin-bottom: 0; }

blockquote {
  border-left: 4px solid #dddddd;
  padding: 0 15px;
  color: #777777; }
  blockquote > :first-child {
    margin-top: 0; }
  blockquote > :last-child {
    margin-bottom: 0; }

table {
  padding: 0;border-collapse: collapse; }
  table tr {
    border-top: 1px solid #cccccc;
    background-color: white;
    margin: 0;
    padding: 0; }
    table tr:nth-child(2n) {
      background-color: #f8f8f8; }
    table tr th {
      font-weight: bold;
      border: 1px solid #cccccc;
      margin: 0;
      padding: 6px 13px; }
    table tr td {
      border: 1px solid #cccccc;
      margin: 0;
      padding: 6px 13px; }
    table tr th :first-child, table tr td :first-child {
      margin-top: 0; }
    table tr th :last-child, table tr td :last-child {
      margin-bottom: 0; }

img {
  max-width: 100%; }

span.frame {
  display: block;
  overflow: hidden; }
  span.frame > span {
    border: 1px solid #dddddd;
    display: block;
    float: left;
    overflow: hidden;
    margin: 13px 0 0;
    padding: 7px;
    width: auto; }
  span.frame span img {
    display: block;
    float: left; }
  span.frame span span {
    clear: both;
    color: #333333;
    display: block;
    padding: 5px 0 0; }
span.align-center {
  display: block;
  overflow: hidden;
  clear: both; }
  span.align-center > span {
    display: block;
    overflow: hidden;
    margin: 13px auto 0;
    text-align: center; }
  span.align-center span img {
    margin: 0 auto;
    text-align: center; }
span.align-right {
  display: block;
  overflow: hidden;
  clear: both; }
  span.align-right > span {
    display: block;
    overflow: hidden;
    margin: 13px 0 0;
    text-align: right; }
  span.align-right span img {
    margin: 0;
    text-align: right; }
span.float-left {
  display: block;
  margin-right: 13px;
  overflow: hidden;
  float: left; }
  span.float-left span {
    margin: 13px 0 0; }
span.float-right {
  display: block;
  margin-left: 13px;
  overflow: hidden;
  float: right; }
  span.float-right > span {
    display: block;
    overflow: hidden;
    margin: 13px auto 0;
    text-align: right; }

code, tt {
  margin: 0 2px;
  padding: 0 5px;
  white-space: nowrap;
  border: 1px solid #eaeaea;
  background-color: #f8f8f8;
  border-radius: 3px; }

pre code {
  margin: 0;
  padding: 0;
  white-space: pre;
  border: none;
  background: transparent; }

.highlight pre {
  background-color: #f8f8f8;
  border: 1px solid #cccccc;
  font-size: 13px;
  line-height: 19px;
  overflow: auto;
  padding: 6px 10px;
  border-radius: 3px; }

pre {
  background-color: #f8f8f8;
  border: 1px solid #cccccc;
  font-size: 13px;
  line-height: 19px;
  overflow: auto;
  padding: 6px 10px;
  border-radius: 3px; }
  pre code, pre tt {
    background-color: transparent;
    border: none; }

sup {
    font-size: 0.83em;
    vertical-align: super;
    line-height: 0;
}

kbd {
  display: inline-block;
  padding: 3px 5px;
  font-size: 11px;
  line-height: 10px;
  color: #555;
  vertical-align: middle;
  background-color: #fcfcfc;
  border: solid 1px #ccc;
  border-bottom-color: #bbb;
  border-radius: 3px;
  box-shadow: inset 0 -1px 0 #bbb
}

* {
	-webkit-print-color-adjust: exact;
}
@media screen and (min-width: 914px) {
    body {
        width: 854px;
        margin:0 auto;
    }
}
@media print {
	table, pre {
		page-break-inside: avoid;
	}
	pre {
		word-wrap: break-word;
	}
}
</style>

<style type="text/css">
/*
 Solarized Color Schemes originally by Ethan Schoonover
 http://ethanschoonover.com/solarized

 Ported for PrismJS by Hector Matos
 Website: https://krakendev.io
 Twitter Handle: https://twitter.com/allonsykraken)
*/

/*
SOLARIZED HEX
--------- -------
base03    #002b36
base02    #073642
base01    #586e75
base00    #657b83
base0     #839496
base1     #93a1a1
base2     #eee8d5
base3     #fdf6e3
yellow    #b58900
orange    #cb4b16
red       #dc322f
magenta   #d33682
violet    #6c71c4
blue      #268bd2
cyan      #2aa198
green     #859900
*/

code[class*="language-"],
pre[class*="language-"] {
	color: #657b83; /* base00 */
	font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
	text-align: left;
	white-space: pre;
	word-spacing: normal;
	word-break: normal;
	word-wrap: normal;

	line-height: 1.5;

	-moz-tab-size: 4;
	-o-tab-size: 4;
	tab-size: 4;

	-webkit-hyphens: none;
	-moz-hyphens: none;
	-ms-hyphens: none;
	hyphens: none;
}

pre[class*="language-"]::-moz-selection, pre[class*="language-"] ::-moz-selection,
code[class*="language-"]::-moz-selection, code[class*="language-"] ::-moz-selection {
	background: #073642; /* base02 */
}

pre[class*="language-"]::selection, pre[class*="language-"] ::selection,
code[class*="language-"]::selection, code[class*="language-"] ::selection {
	background: #073642; /* base02 */
}

/* Code blocks */
pre[class*="language-"] {
	padding: 1em;
	margin: .5em 0;
	overflow: auto;
	border-radius: 0.3em;
}

:not(pre) > code[class*="language-"],
pre[class*="language-"] {
	background-color: #fdf6e3; /* base3 */
}

/* Inline code */
:not(pre) > code[class*="language-"] {
	padding: .1em;
	border-radius: .3em;
}

.token.comment,
.token.prolog,
.token.doctype,
.token.cdata {
	color: #93a1a1; /* base1 */
}

.token.punctuation {
	color: #586e75; /* base01 */
}

.namespace {
	opacity: .7;
}

.token.property,
.token.tag,
.token.boolean,
.token.number,
.token.constant,
.token.symbol,
.token.deleted {
	color: #268bd2; /* blue */
}

.token.selector,
.token.attr-name,
.token.string,
.token.char,
.token.builtin,
.token.url,
.token.inserted {
	color: #2aa198; /* cyan */
}

.token.entity {
	color: #657b83; /* base00 */
	background: #eee8d5; /* base2 */
}

.token.atrule,
.token.attr-value,
.token.keyword {
	color: #859900; /* green */
}

.token.function {
	color: #b58900; /* yellow */
}

.token.regex,
.token.important,
.token.variable {
	color: #cb4b16; /* orange */
}

.token.important,
.token.bold {
	font-weight: bold;
}
.token.italic {
	font-style: italic;
}

.token.entity {
	cursor: help;
}
</style>

<style type="text/css">
div.prism-show-language {
	position: relative;
}

div.prism-show-language > div.prism-show-language-label {
	color: black;
	background-color: #CFCFCF;
	display: inline-block;
	position: absolute;
	bottom: auto;
	left: auto;
	top: 0;
	right: 0;
	width: auto;
	height: auto;
	font-size: 0.9em;
	border-radius: 0 0 0 5px;
	padding: 0 0.5em;
	text-shadow: none;
	z-index: 1;
	-webkit-box-shadow: none;
	-moz-box-shadow: none;
	box-shadow: none;
	-webkit-transform: none;
	-moz-transform: none;
	-ms-transform: none;
	-o-transform: none;
	transform: none;
}
</style>


</head>

<body>

<div>
<span style="float: left;">CS 4121, Fall 2019</span>
<span style="float: right;">Dr. Zhiguang Xu</span>
</div>

<p style='clear: left;'></p>

<p><br></p>

<h2 id="toc_0">GENI Lab 5</h2>

<h3 id="toc_1">Due: 3:30pm Oct 09, 2019</h3>

<blockquote>
<p><span style="color:red"><strong>This lab contains programming components and self-exploratory avtivities.</strong></span> Therefore, I highly recommend you to start working on it sooner than later.</p>
</blockquote>

<h3 id="toc_2">0. Introduction</h3>

<h4 id="toc_3">0.1. Overview</h4>

<p>See Pre-lab5 for details.</p>

<h4 id="toc_4">0.2. Background</h4>

<p>See Pre-lab5 for details.</p>

<h3 id="toc_5">1. Lab Configurations</h3>

<p>See Pre-lab5 for details.</p>

<h3 id="toc_6">2. Lab Details</h3>

<h4 id="toc_7">2.1. Generate Data</h4>

<p>In this lab, we will generate <strong>three TCP flows</strong> between the two end hosts with a router in between, and use them to observe the behavior of the TCP congestion control algorithm.</p>

<p>First, on <strong>Receiver</strong> node, run the following to start the <code>iperf</code> server.</p>

<pre>
iperf -s  
</pre>

<p>Next, on <strong>Sender</strong> node, run the TCP probe module that you downloaded in pre-lab5. The data it collects from all three TCP flows will be all saved in the file <code>tcpprobe.dat</code> in the folder <code>/tmp</code>.</p>

<pre>
dd if=/proc/net/tcpprobe ibs=128 obs=128 | tee /tmp/tcpprobe.dat 
</pre>

<p>Open <span style="color:red"><strong>another SSH terminal to the &quot;sender&quot; node</strong></span> and run</p>

<pre>
iperf -t 60 -c receiver -P 3 
</pre>

<p>to start the TCP flows. Here</p>

<ul>
<li><code>-t 60</code> says to run for 60 seconds</li>
<li><code>-c receiver</code> says to send traffic to the host named &quot;receiver&quot;</li>
<li><code>-P 3</code> says to send 3 parallel TCP flows</li>
</ul>

<p>You will see a final status report in the <code>iperf</code> window after the <code>iperf</code> sender finishes, which should take about a minute. In the window where the TCP probe is running, you should see a line of output for each TCP packet. Stop TCP probe by pressing CTRL+C.</p>

<h4 id="toc_8">2.2. Understand the TCP Probe Output</h4>

<p>As I said above, the output of the TCP probe will be saved in <code>/tmp/tcpprobe.dat</code> on the sender. <strong>Use scp to transfer this file to your local laptop for processing.</strong></p>

<blockquote>
<p>If you are still not sure how to do the file transfer, <strong>check back what you did in Lab 2.</strong></p>
</blockquote>

<p>Open <code>tcpprobe.dat</code> on your local computer, the following should be likely what you see:</p>

<pre>
88.153283837 10.10.1.2:51205 10.10.2.2:5001 44 0x72e3b71a 0x72e2f6ca 16 12 341760 206 29312
88.165276815 10.10.1.2:51205 10.10.2.2:5001 44 0x72e3bcc2 0x72e2f6ca 16 12 341760 206 29312
88.177368074 10.10.1.2:51205 10.10.2.2:5001 44 0x72e3bcc2 0x72e2f6ca 15 12 341760 207 29312
...
...
88.322616545 10.10.1.2:51207 10.10.2.2:5001 44 0x81cb5225 0x81caa2cd 17 12 336000 208 29312
88.334871907 10.10.1.2:51207 10.10.2.2:5001 44 0x81cb57cd 0x81caa2cd 17 12 336000 205 29312
88.346999896 10.10.1.2:51207 10.10.2.2:5001 44 0x81cb57cd 0x81caa2cd 16 12 336000 203 29312
88.359135417 10.10.1.2:51207 10.10.2.2:5001 44 0x81cb5d75 0x81caa2cd 16 12 336000 201 29312
88.371254962 10.10.1.2:51207 10.10.2.2:5001 44 0x81cb5d75 0x81caa2cd 15 12 336000 200 29312
88.383238328 10.10.1.2:51207 10.10.2.2:5001 44 0x81cb631d 0x81caa2cd 15 12 336000 199 29312
...
...
88.528702143 10.10.1.2:51206 10.10.2.2:5001 44 0x7efc0be9 0x7efb45f1 13 12 301184 208 29312
88.540836099 10.10.1.2:51206 10.10.2.2:5001 44 0x7efc0be9 0x7efb45f1 12 12 301184 203 29312
...
...
</pre>

<p>The TCP module probe records a line of output every time a packet is sent, if either the destination or the source port number in the TCP packet header is 5001 (since we loaded it with the <code>port=5001</code> option in the last step of pre-lab5). </p>

<p>Each line of output will include the following 11 fields, in order:</p>

<table>
<thead>
<tr>
<th style="text-align: left">Field</th>
<th style="text-align: left">Explanation</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left"><span style="color:red">Time</span></td>
<td style="text-align: left">Time (in seconds) since beginning of probe output</td>
</tr>
<tr>
<td style="text-align: left">Sender</td>
<td style="text-align: left">Source address and port of the packet, as IP:port</td>
</tr>
<tr>
<td style="text-align: left">Receiver</td>
<td style="text-align: left">Destination address and port of the packet, as IP:port</td>
</tr>
<tr>
<td style="text-align: left">Bytes</td>
<td style="text-align: left">Bytes in packet</td>
</tr>
<tr>
<td style="text-align: left">Next</td>
<td style="text-align: left">Next send sequence number, in hex format</td>
</tr>
<tr>
<td style="text-align: left">Unacknowledged</td>
<td style="text-align: left">Smallest sequence number of packet send but unacknowledged, in hex format</td>
</tr>
<tr>
<td style="text-align: left"><span style="color:red">Send CWND</span></td>
<td style="text-align: left">Size of send congestion window for this connection (in MSS)</td>
</tr>
<tr>
<td style="text-align: left"><span style="color:red">Slow start threshold</span></td>
<td style="text-align: left">Size of send congestion window for this connection (in MSS)</td>
</tr>
<tr>
<td style="text-align: left">Send window</td>
<td style="text-align: left">Send window size (in MSS). Set to the minimum of send CWND and receive window size</td>
</tr>
<tr>
<td style="text-align: left">Smoothed RTT</td>
<td style="text-align: left">Smoothed estimated RTT for this connection (in ms)</td>
</tr>
<tr>
<td style="text-align: left">Receive window</td>
<td style="text-align: left">Receiver window size (in MSS), received in the lack ACK. This limit prevents the receiver buffer from overflowing, i.e. prevents the sender from sending at a rate that is faster than the receiver can process the data.</td>
</tr>
</tbody>
</table>

<p>By looking at your TCP probe data, you can observe the behavior of the TCP congestion control algorithm.</p>

<h4 id="toc_9">2.3. Process the TCP Probe Output</h4>

<p>As you can see, the raw data file <code>tcpprobe.dat</code> is not yet ready for plotting because:</p>

<ul>
<li>The last line in your data file may be incomplete and needs to be truncated.</li>
<li>On each line, the default delimiters between the fields are white spaces, which must be replaced with commas (<code>,</code>) to facilitate further processing tasks.</li>
<li><p>And most importantly, all three flows (i.e. from sources <code>10.10.1.2:51205</code>, <code>10.10.1.2:51207</code>, and <code>10.10.1.2:51206</code> are mixed in one file. They must be separated.</p>

<blockquote>
<p>Notice that your source port numbers might be different than <code>51205</code>, <code>51206</code>, and <code>51207</code>.</p>
</blockquote></li>
</ul>

<p>So, now you are asked to <span style="color:red"><strong>write a Java program</strong></span> to process <code>tcpprobe.dat</code> in the following way:</p>

<ul>
<li>It deletes the last line containing incomplete data;</li>
<li>It replaces all white space delimiters on all lines with commas;</li>
<li>And it separates the three TCP flows based on their source port numbers (the source IP addresses are useless here because all three TCP flows were from the same IP) and spills them out into three separate files.</li>
</ul>

<p>Name your Java program <code>Process_TCPProbe_yourinitial.java</code> which must run in the following way:</p>

<pre>
java Process_TCPProbe_yourinitial tcpprobe.dat tcpprobe_xxxxx_comma.dat tcpprobe_yyyyy_comma.dat tcpprobe_zzzzz_comma.dat
</pre>

<p>The program takes four arguments: one raw data file as input and three output files. Of course, please replace the placeholder <code>xxxxx</code>, <code>yyyyy</code>, and <code>zzzzz</code> with the actual source port numbers in your data file.</p>

<p>The following is a sample of one of the output files for your reference:</p>

<pre>
...
93.324970324,10.10.1.2:51205,10.10.2.2:5001,32,0x72e71882,0x72e6a762,20,15,341760,165,29312
93.337148466,10.10.1.2:51205,10.10.2.2:5001,32,0x72e71882,0x72e6ad0a,20,15,341760,165,29312
93.349120821,10.10.1.2:51205,10.10.2.2:5001,32,0x72e723d2,0x72e6b2b2,20,15,341760,166,29312
...
</pre>

<p>Test your program thoroughly and</p>

<ul>
<li><p>File-transfer the three output files produced by your program back to the <code>Sender</code> node using scp.</p>

<blockquote>
<p>Again, if you are still not sure how to do the file transfer, <strong>check back what you did in Lab 2.</strong></p>

<p>Hint: Do <code>mget</code> to transfer files from Sender node to your local computer. Do <code>mput</code> for the opposite.</p>
</blockquote>

<p><span style="color:red">Also, very importantly, make sure you save them into the <code>/tmp</code> folder on <code>Sender</code>.</span></p></li>
<li><p>Submit your Java program to me on BlazeVIEW.</p></li>
</ul>

<p>Note, <span style="color:red"><strong>zero point will be assigned if any of the following happens</strong></span>:</p>

<ul>
<li><p>I receive anything other than the Java source code.</p></li>
<li><p>The Java source code is not named correctly.</p></li>
<li><p>The Java source code fails to compile. </p>

<p>I will simply compile it by running <code>javac Process_TCPProbe_yourinitial.java</code>. Make sure you do so before turning your program in. A common problem could be caused by the <code>package...;</code> line added by some IDEs such as jGrasp or Eclipse that you happen to use. My suggestion to you is <strong>DO NOT USE THEM</strong> to begin with. ðŸ˜¬</p></li>
</ul>

<p>Also, <span style="color:red"><strong>VERY VERY IMPORTANTLY,</strong></span> make sure that <strong>you don&#39;t hard-code the source port numbers ANYWHERE in your Java program.</strong> You must obtain them from the last three command-line arguments tcpprobe_xxxxx_comma.dat, tcpprobe_yyyyy_comma.dat, and tcpprobe_zzzzz_comma.dat.</p>

<blockquote>
<p>Admittedly, the tasks above could have been done very easily using one at most two UNIX commands. However, this class does not have CS 3300 as its prerequisite, therefore, I have to ask you all to do them in Java programmatically. </p>
</blockquote>

<h4 id="toc_10">2.4. Plot the Congestion Window (CWND) and Slow Start Threshold for Each TCP Flow</h4>

<p>In <code>Sender</code> terminal,</p>

<pre>
sudo su
cd /tmp
</pre>

<p>Then do the following. </p>

<ul>
<li><p>First install <code>gnuplot</code>:</p>

<pre>
apt-get -y install gnuplot
</pre></li>
<li><p>Download the file <code>dash_plot.gnu</code> designed for lab 4 that we skipped:</p>

<pre>
wget -nH --no-parent "http://witestlab.poly.edu/repos/genimooc/run_my_experiment/dash_experiment/src/client/dash_plot.gnu"  
</pre>

<p>Rename it to <code>sawtooth_plot.gnu</code> by running </p>

<pre>
mv dash_plot.gnu sawtooth_plot.gnu
</pre></li>
<li><p>Edit <code>sawtooth_plot.gnu</code> and run it in the following way such that it plots the sawtooth figure for the first TCP stream file <code>tcpprobe_xxxxx_comma.dat</code>. </p>

<pre>
gnuplot sawtooth_plot.gnu 
</pre>

<p>The resulting figure should be named <code>sawtooth_xxxxx.eps</code> where <code>xxxxx</code> is the source port number of your first TCP flow. <span style="color:red">Make sure the title of the figure includes your full name or no point will be assigned.</span></p>

<blockquote>
<p>The original <code>dash_plot.gnu</code> is very self-explanatory. Use it as your template when making changes. It is going to be a &quot;trial and error&quot; process that might take a while, especially if you have to do the file editing on your local computer and transfer the edited one back to <code>Sender</code> using <code>scp</code>.</p>

<p>Hint: </p>

<ol>
<li>In the original .gnu script, two figures are generated. Here in this lab, we only need to generate one.</li>
<li>To change to ratio of the x-axis and y-axis, you simply need to do <code>set size 2, 1</code></li>
</ol>
</blockquote></li>
<li><p>Install <code>texlive-font-utils</code> which contains <code>epstopdf</code>.</p>

<blockquote>
<p>Viewer for <code>eps</code> files are readily available on Linus and Mac computers. However, unfortunately, not on Windows. Therefore, we need to convert them to PDF format.</p>
</blockquote>

<pre>
apt-get install texlive-font-utils
</pre></li>
<li><p>Convert the figure in the eps format to PDF with <code>epstopdf</code>.</p>

<pre>
epstopdf sawtooth_xxxxx.eps    <<-- replace xxxx with the actual source port number
</pre>

<p>The following shows a sample plot for your reference.</p>

<p><img src="./sawtooth_51205.jpg" alt="sawtooth_51205.jgp"></p></li>
<li><p><strong>Do the same for the other two TCP flows.</strong></p></li>
<li><p>Finally, file transfer all three PDFs to your local computer.</p></li>
</ul>

<h3 id="toc_11">3. What to Turn in?</h3>

<p>Submit the following five files:</p>

<ul>
<li><p>The Java source code file for processing the saw TCP Probe output. <span style="color:red"><strong>Detailed requirements for this program could be found in Section 2.3 above</strong></span>.</p>

<ul>
<li><code>Process_TCPProbe_yourinitial.java</code></li>
</ul></li>
<li><p>The script that you edited for plotting:</p>

<ul>
<li><code>sawtooth_plot.gnu</code></li>
</ul></li>
<li><p>and three plots to show sawtooth for TCP congestion control:</p>

<ul>
<li><code>sawtooth_xxxxx.pdf</code></li>
<li><code>sawtooth_xxxxx.pdf</code></li>
<li><code>sawtooth_zzzzz.pdf</code></li>
</ul>

<p>Where <code>xxxxx</code>, <code>yyyyy</code>, <code>zzzzz</code> are the source port numbers of your three respective TCP flows. <span style="color:red"><strong>Again, make sure that the title of each plot you submit includes your full name, or no points will be assigned.</strong></span> </p></li>
</ul>



<script type="text/javascript">
var _self="undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:{},Prism=function(){var e=/\blang(?:uage)?-(\w+)\b/i,t=0,n=_self.Prism={util:{encode:function(e){return e instanceof a?new a(e.type,n.util.encode(e.content),e.alias):"Array"===n.util.type(e)?e.map(n.util.encode):e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(e){return Object.prototype.toString.call(e).match(/\[object (\w+)\]/)[1]},objId:function(e){return e.__id||Object.defineProperty(e,"__id",{value:++t}),e.__id},clone:function(e){var t=n.util.type(e);switch(t){case"Object":var a={};for(var r in e)e.hasOwnProperty(r)&&(a[r]=n.util.clone(e[r]));return a;case"Array":return e.map&&e.map(function(e){return n.util.clone(e)})}return e}},languages:{extend:function(e,t){var a=n.util.clone(n.languages[e]);for(var r in t)a[r]=t[r];return a},insertBefore:function(e,t,a,r){r=r||n.languages;var l=r[e];if(2==arguments.length){a=arguments[1];for(var i in a)a.hasOwnProperty(i)&&(l[i]=a[i]);return l}var o={};for(var s in l)if(l.hasOwnProperty(s)){if(s==t)for(var i in a)a.hasOwnProperty(i)&&(o[i]=a[i]);o[s]=l[s]}return n.languages.DFS(n.languages,function(t,n){n===r[e]&&t!=e&&(this[t]=o)}),r[e]=o},DFS:function(e,t,a,r){r=r||{};for(var l in e)e.hasOwnProperty(l)&&(t.call(e,l,e[l],a||l),"Object"!==n.util.type(e[l])||r[n.util.objId(e[l])]?"Array"!==n.util.type(e[l])||r[n.util.objId(e[l])]||(r[n.util.objId(e[l])]=!0,n.languages.DFS(e[l],t,l,r)):(r[n.util.objId(e[l])]=!0,n.languages.DFS(e[l],t,null,r)))}},plugins:{},highlightAll:function(e,t){var a={callback:t,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};n.hooks.run("before-highlightall",a);for(var r,l=a.elements||document.querySelectorAll(a.selector),i=0;r=l[i++];)n.highlightElement(r,e===!0,a.callback)},highlightElement:function(t,a,r){for(var l,i,o=t;o&&!e.test(o.className);)o=o.parentNode;o&&(l=(o.className.match(e)||[,""])[1],i=n.languages[l]),t.className=t.className.replace(e,"").replace(/\s+/g," ")+" language-"+l,o=t.parentNode,/pre/i.test(o.nodeName)&&(o.className=o.className.replace(e,"").replace(/\s+/g," ")+" language-"+l);var s=t.textContent,u={element:t,language:l,grammar:i,code:s};if(!s||!i)return n.hooks.run("complete",u),void 0;if(n.hooks.run("before-highlight",u),a&&_self.Worker){var c=new Worker(n.filename);c.onmessage=function(e){u.highlightedCode=e.data,n.hooks.run("before-insert",u),u.element.innerHTML=u.highlightedCode,r&&r.call(u.element),n.hooks.run("after-highlight",u),n.hooks.run("complete",u)},c.postMessage(JSON.stringify({language:u.language,code:u.code,immediateClose:!0}))}else u.highlightedCode=n.highlight(u.code,u.grammar,u.language),n.hooks.run("before-insert",u),u.element.innerHTML=u.highlightedCode,r&&r.call(t),n.hooks.run("after-highlight",u),n.hooks.run("complete",u)},highlight:function(e,t,r){var l=n.tokenize(e,t);return a.stringify(n.util.encode(l),r)},tokenize:function(e,t){var a=n.Token,r=[e],l=t.rest;if(l){for(var i in l)t[i]=l[i];delete t.rest}e:for(var i in t)if(t.hasOwnProperty(i)&&t[i]){var o=t[i];o="Array"===n.util.type(o)?o:[o];for(var s=0;s<o.length;++s){var u=o[s],c=u.inside,g=!!u.lookbehind,h=!!u.greedy,f=0,d=u.alias;u=u.pattern||u;for(var p=0;p<r.length;p++){var m=r[p];if(r.length>e.length)break e;if(!(m instanceof a)){u.lastIndex=0;var y=u.exec(m),v=1;if(!y&&h&&p!=r.length-1){var b=r[p+1].matchedStr||r[p+1],k=m+b;if(p<r.length-2&&(k+=r[p+2].matchedStr||r[p+2]),u.lastIndex=0,y=u.exec(k),!y)continue;var w=y.index+(g?y[1].length:0);if(w>=m.length)continue;var _=y.index+y[0].length,P=m.length+b.length;if(v=3,P>=_){if(r[p+1].greedy)continue;v=2,k=k.slice(0,P)}m=k}if(y){g&&(f=y[1].length);var w=y.index+f,y=y[0].slice(f),_=w+y.length,S=m.slice(0,w),O=m.slice(_),j=[p,v];S&&j.push(S);var A=new a(i,c?n.tokenize(y,c):y,d,y,h);j.push(A),O&&j.push(O),Array.prototype.splice.apply(r,j)}}}}}return r},hooks:{all:{},add:function(e,t){var a=n.hooks.all;a[e]=a[e]||[],a[e].push(t)},run:function(e,t){var a=n.hooks.all[e];if(a&&a.length)for(var r,l=0;r=a[l++];)r(t)}}},a=n.Token=function(e,t,n,a,r){this.type=e,this.content=t,this.alias=n,this.matchedStr=a||null,this.greedy=!!r};if(a.stringify=function(e,t,r){if("string"==typeof e)return e;if("Array"===n.util.type(e))return e.map(function(n){return a.stringify(n,t,e)}).join("");var l={type:e.type,content:a.stringify(e.content,t,r),tag:"span",classes:["token",e.type],attributes:{},language:t,parent:r};if("comment"==l.type&&(l.attributes.spellcheck="true"),e.alias){var i="Array"===n.util.type(e.alias)?e.alias:[e.alias];Array.prototype.push.apply(l.classes,i)}n.hooks.run("wrap",l);var o="";for(var s in l.attributes)o+=(o?" ":"")+s+'="'+(l.attributes[s]||"")+'"';return"<"+l.tag+' class="'+l.classes.join(" ")+'" '+o+">"+l.content+"</"+l.tag+">"},!_self.document)return _self.addEventListener?(_self.addEventListener("message",function(e){var t=JSON.parse(e.data),a=t.language,r=t.code,l=t.immediateClose;_self.postMessage(n.highlight(r,n.languages[a],a)),l&&_self.close()},!1),_self.Prism):_self.Prism;var r=document.currentScript||[].slice.call(document.getElementsByTagName("script")).pop();return r&&(n.filename=r.src,document.addEventListener&&!r.hasAttribute("data-manual")&&document.addEventListener("DOMContentLoaded",n.highlightAll)),_self.Prism}();"undefined"!=typeof module&&module.exports&&(module.exports=Prism),"undefined"!=typeof global&&(global.Prism=Prism);
</script>

<script type="text/javascript">
!function(){if("undefined"!=typeof self&&self.Prism&&self.document){var e={html:"HTML",xml:"XML",svg:"SVG",mathml:"MathML",css:"CSS",clike:"C-like",javascript:"JavaScript",abap:"ABAP",actionscript:"ActionScript",apacheconf:"Apache Configuration",apl:"APL",applescript:"AppleScript",asciidoc:"AsciiDoc",aspnet:"ASP.NET (C#)",autoit:"AutoIt",autohotkey:"AutoHotkey",basic:"BASIC",csharp:"C#",cpp:"C++",coffeescript:"CoffeeScript","css-extras":"CSS Extras",fsharp:"F#",glsl:"GLSL",http:"HTTP",inform7:"Inform 7",json:"JSON",latex:"LaTeX",lolcode:"LOLCODE",matlab:"MATLAB",mel:"MEL",nasm:"NASM",nginx:"nginx",nsis:"NSIS",objectivec:"Objective-C",ocaml:"OCaml",parigp:"PARI/GP",php:"PHP","php-extras":"PHP Extras",powershell:"PowerShell",jsx:"React JSX",rest:"reST (reStructuredText)",sas:"SAS",sass:"Sass (Sass)",scss:"Sass (Scss)",sql:"SQL",typescript:"TypeScript",vhdl:"VHDL",vim:"vim",wiki:"Wiki markup",yaml:"YAML"};Prism.hooks.add("before-highlight",function(s){var a=s.element.parentNode;if(a&&/pre/i.test(a.nodeName)){var t,i,r=a.getAttribute("data-language")||e[s.language]||s.language.substring(0,1).toUpperCase()+s.language.substring(1),l=a.previousSibling;l&&/\s*\bprism-show-language\b\s*/.test(l.className)&&l.firstChild&&/\s*\bprism-show-language-label\b\s*/.test(l.firstChild.className)?i=l.firstChild:(t=document.createElement("div"),i=document.createElement("div"),i.className="prism-show-language-label",t.className="prism-show-language",t.appendChild(i),a.parentNode.insertBefore(t,a)),i.innerHTML=r}})}}();
</script>

<script type="text/x-mathjax-config">
(function () {

MathJax.Hub.Config({
	'showProcessingMessages': false,
	'messageStyle': 'none'
});

if (typeof MathJaxListener !== 'undefined') {
	MathJax.Hub.Register.StartupHook('End', function () {
		MathJaxListener.invokeCallbackForKey_('End');
	});
}

})();
</script>

<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>


</body>

</html>
